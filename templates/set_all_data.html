{% extends "base.html" %}

{% block content %}
    <div class="form-container">
        <h2 class="page-title">Set Your Information</h2>

        <!-- Form Container -->
        <form id="user-base-info" method="POST">
            <!-- API Key Field (Private) -->
            <div class="form-group">
                <label for="api_key" class="form-label">Enter API Key:</label>
                <input type="password" id="api_key" name="api_key" class="form-control" required placeholder="Enter your API key here">
            </div>

            <!-- Resume Text Field -->
            <div class="form-group">
                <label for="resume_text" class="form-label">Enter Resume Text:</label>
                <textarea id="resume_text" name="resume_text" rows="5" class="form-control" required placeholder="Paste your resume text here"></textarea>
            </div>

            <!-- Submit Button -->
            <button id="resume-submit" type="submit" class="btn-submit">Submit</button>
            <div id="loading-container" class="loading-container">
                <p class="loading-text"><i>Processing your information may take a few minutes at this stage.</i></p>
                <div class="dot-wrapper" id="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>   

        </form>
    </div>
{% endblock %}

{% block script %}
<script type="module" src="{{ url_for('static', filename='js/PersistDataRM.js') }}"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const apiKey = localStorage.getItem("api_key");
        const resumeText = localStorage.getItem("resume_text");

        if (apiKey) {
            document.getElementById("api_key").value = apiKey;
        }
        if (resumeText) {
            document.getElementById("resume_text").value = resumeText;
        }
    });
</script>
{% endblock %}